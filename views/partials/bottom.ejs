<script type="application/javascript">

  var substringMatcher = function (strs) {
    return function findMatches(q, cb) {
      var matches, substringRegex;

      // an array that will be populated with substring matches
      matches = [];

      // regex used to determine if a string contains the substring `q`
      substrRegex = new RegExp(q, 'i');

      // iterate through the pool of strings and for any string that
      // contains the substring `q`, add it to the `matches` array
      $.each(strs, function (i, str) {
        if (substrRegex.test(str)) {
          matches.push(str);
        }
      });

      cb(matches);
    };
  };


  <% if(typeof subcat !== 'undefined') { %>
  var subcat = [];
  <% subcat.forEach(function(item){ %>
  subcat.push('<%= item %>')
  <% }); %>
  $('#subcat .subcat').typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    },
    {
      name: 'subcategory',
      source: substringMatcher(subcat)
    });
  <% } %>

  <% if(typeof cat !== 'undefined') { %>
  var cat = [];
  <% cat.forEach(function(item){ %>
  cat.push('<%= item %>')
  <% }); %>
  $('#cat .cat').typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    },
    {
      name: 'category',
      source: substringMatcher(cat)
    });
  <% } %>


  /**
   * Returns a random integer between min (inclusive) and max (inclusive)
   * Using Math.round() will give you a non-uniform distribution!
   */
  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  var color = [
    "rgb(176, 43, 44)",
    "rgb(209, 86, 0)",
    "rgb(199, 152, 16)",
    "rgb(115, 136, 10)",
    "rgb(107, 186, 112)",
    "rgb(63, 76, 107)",
    "rgb(53, 106, 160)",
    "rgb(208, 31, 60)",
    "rgb(255, 26, 0)",
    "rgb(204, 0, 0)",
    "rgb(255, 116, 0)",
    "rgb(0, 140, 0)",
    "rgb(0, 110, 46)",
    "rgb(64, 150, 238)",
    "rgb(255, 0, 132)",
    "rgb(54, 57, 61)",
  ];

</script>
<%- partial('./donutweekly.ejs') %>
<%- partial('./bankweeklybarchart.ejs') %>
